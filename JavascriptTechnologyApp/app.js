/***
 * DATA ********************************
 */

// categories data
var categoriesData = [
	{
		"name" : "Software Engineering",
		"courses" : [
         	{
				"code":"IN3050",
				"name":"Selected Topics in Software Engineering",
				"semester":"irreg.",
				"languages":"English or German",
				"hours":"",
				"ECTS":null
			  },
			  {
			    "code":"IN2114",
				"name":"Automotive Software - Methods and Technology",
				"semester":"SS",
				"languages":"English or German",
				"hours":"2V+ 2†",
				"ECTS":5
			  },
			  {
			    "code":"IN2256",
				"name":"Advanced Topics of Software Testing",
				"semester":"irreg.",
				"languages":"English or German",
				"hours":"2V+ 2†",
				"ECTS":5
			  },
			  {
			    "code":"IN2078",
				"name":"Foundations of program and system development",
				"semester":"WS",
				"languages":"English or German",
				"hours":"3V+ 2†",
				"ECTS":6
			  },
			  {
			    "code":"IN2279",
				"name":"Introduction to Service Computing",
				"semester":"WS",
				"languages":"English",
				"hours":"2V+ 2†",
				"ECTS":5
			  },
			  {
			    "code":"IN2079",
				"name":"IT-Consulting",
				"semester":"WS",
				"languages":"English or German",
				"hours":"2V",
				"ECTS":3
			  },
			  {
			    "code":"IN2080",
				"name":"Modelling of Distributed Systems",
				"semester":"SS",
				"languages":"German",
				"hours":"2V+ 1†",
				"ECTS":4
			  },
			  {
			    "code":"IN2081",
				"name":"Patterns in Software Engineering",
				"semester":"WS",
				"languages":"English",
				"hours":"2V+ 2†",
				"ECTS":5
			  },
			  {
			    "code":"IN2083",
				"name":"Project Organisation and Management in Software Engineering",
				"semester":"SS",
				"languages":"English or German",
				"hours":"2V+ 2†",
				"ECTS":5
			  },
			  {
			    "code":"IN2084",
				"name":"Software testing: Processes and Methods",
				"semester":"SS",
				"languages":"German",
				"hours":"2V+ 2†",
				"ECTS":5
			  },
			  {
			    "code":"IN2198",
				"name":"Requirements Engineering",
				"semester":"WS",
				"languages":"German",
				"hours":"2V+ 2†",
				"ECTS":6
			  },
			  {
			    "code":"IN2241",
				"name":"Social Computing",
				"semester":"SS",
				"languages":"English or German",
				"hours":"3V",
				"ECTS":4
			  },
			  {
			    "code":"IN2088",
				"name":"Software Architectures",
				"semester":"WS",
				"languages":"English or German",
				"hours":"2V",
				"ECTS":3
			  },
			  {
			    "code":"IN2087",
				"name":"Software Engineering for Business Applications - Master's Course",
				"semester":"SS",
				"languages":"English",
				"hours":"2V+ 2†",
				"ECTS":5
			  },
			  {
			    "code":"IN2126",
				"name":"Software Engineering I: Software Technology",
				"semester":"WS",
				"languages":"English or German",
				"hours":"3V+ 2†",
				"ECTS":6
			  },
			  {
			    "code":"IN2235",
				"name":"Software Engineering in an Industrial Setting",
				"semester":"WS",
				"languages":"German",
				"hours":"2V",
				"ECTS":3
			  },
			  {
			    "code":"IN2089",
				"name":"Strategic IT Management",
				"semester":"WS",
				"languages":"German",
				"hours":"2V",
				"ECTS":3
			  }
		  ]
	},
	
	{
		"name" : "Databases and Information Systems",
		"courses" :
			[
			  {
			    "code":"IN2219",
			    "name":"Query Optimization",
			    "semester":"SS",
			    "languages":"English",
			    "hours":"3V+ 2†",
			    "ECTS":6
			  },
			  {
			    "code":"IN2211",
			    "name":"Auction theory and market design",
			    "semester":"irreg.",
			    "languages":"German",
			    "hours":"2V",
			    "ECTS":3
			  },
			  {
			    "code":"IN3100",
			    "name":"Selected Topics in Databases and Information Systems",
			    "semester":"irreg.",
			    "languages":"English or German",
			    "hours":"",
			    "ECTS":null
			  },
			  {
			    "code":"IN2028",
			    "name":"Business Analytics",
			    "semester":"WS",
			    "languages":"German",
			    "hours":"2V+ 2†",
			    "ECTS":5
			  },
			  {
			    "code":"IN2030",
			    "name":"Data Mining and Knowledge Discovery",
			    "semester":"WS",
			    "languages":"German",
			    "hours":"2V",
			    "ECTS":3
			  },
			  {
			    "code":"IN2118",
			    "name":"Database Systems on Modern CPU Architectures",
			    "semester":"irreg.",
			    "languages":"German",
			    "hours":"3V+ 2†",
			    "ECTS":6
			  },
			  {
			    "code":"IN2031",
			    "name":"Application and Implementation of Database Systems",
			    "semester":"SS",
			    "languages":"German",
			    "hours":"3V+ 2†",
			    "ECTS":6
			  },
			  {
			    "code":"IN2032",
			    "name":"Electronic Publishing / Document Engineering and the World-Wide Web",
			    "semester":"WS,SS",
			    "languages":"German",
			    "hours":"3V+ 1†",
			    "ECTS":5
			  },
			  {
			    "code":"IN2288",
			    "name":"Event Processing",
			    "semester":"",
			    "languages":"English",
			    "hours":"2V+ 2†",
			    "ECTS":5
			  },
			  {
			    "code":"IN2033",
			    "name":"Information Management",
			    "semester":"SS",
			    "languages":"German",
			    "hours":"2V+ 2†",
			    "ECTS":5
			  },
			  {
			    "code":"IN2037",
			    "name":"Reference Models for Information Systems",
			    "semester":"SS",
			    "languages":"German",
			    "hours":"3V+ 1†",
			    "ECTS":5
			  },
			  {
			    "code":"IN2267",
			    "name":"Transaction Systems",
			    "semester":"WS",
			    "languages":"English",
			    "hours":"3V+ 2†",
			    "ECTS":6
			  },
			  {
			    "code":"IN2038",
			    "name":"Distributed and Web Information Systems",
			    "semester":"irreg.",
			    "languages":"German",
			    "hours":"3V+ 2†",
			    "ECTS":6
			  }
			]
	},
	
	{
		"name": "Artificial Intelligence and Robotics",
		"courses" : [
		             {
		            	    "code":"IN2057",
		            	    "name":"3D Computer Vision",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2123",
		            	    "name":"3D Computer Vision II",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2058",
		            	    "name":"Applications of Knowledge-Based Techniques",
		            	    "semester":"irreg.",
		            	    "languages":"English or German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN3150",
		            	    "name":"Selected Topics in Artificial Intelligence and Robotics",
		            	    "semester":"irreg.",
		            	    "languages":"English or German",
		            	    "hours":"",
		            	    "ECTS":null
		            	  },
		            	  {
		            	    "code":"IN2138",
		            	    "name":"Robot Motion Planning",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"3V",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2060",
		            	    "name":"Real-Time Systems",
		            	    "semester":"WS",
		            	    "languages":"German",
		            	    "hours":"3V+ 2†",
		            	    "ECTS":6
		            	  },
		            	  {
		            	    "code":"IN2061",
		            	    "name":"Introduction to digital signal processing",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"3V+ 3†",
		            	    "ECTS":7
		            	  },
		            	  {
		            	    "code":"IN2062",
		            	    "name":"Techniques in Artificial Intelligence",
		            	    "semester":"WS",
		            	    "languages":"English or German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2133",
		            	    "name":"Principles of Computer Vision",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"3V",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2124",
		            	    "name":"Basic Mathematical Methods for Imaging and Visualization",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2250",
		            	    "name":"Human-Friendly Robotics",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2244",
		            	    "name":"Industrial Embedded Systems",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"1V",
		            	    "ECTS":2
		            	  },
		            	  {
		            	    "code":"IN2063",
		            	    "name":"Integrated (Embedded) Intelligent Systems",
		            	    "semester":"SS",
		            	    "languages":"English or German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2222",
		            	    "name":"Cognitive Systems",
		            	    "semester":"SS",
		            	    "languages":"English or German",
		            	    "hours":"3V",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2064",
		            	    "name":"Machine Learning",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2144",
		            	    "name":"Machine Learning and Data Mining in Bioinformatics",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2208",
		            	    "name":"Environmental modeling and decision support systems",
		            	    "semester":"WS",
		            	    "languages":"English or German",
		            	    "hours":"2V",
		            	    "ECTS":3
		            	  },
		            	  {
		            	    "code":"IN2067",
		            	    "name":"Robotics",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"3V+ 2†",
		            	    "ECTS":6
		            	  },
		            	  {
		            	    "code":"IN2068",
		            	    "name":"Sensor-based Robotic Manipulation and Locomotion",
		            	    "semester":"WS,SS",
		            	    "languages":"German",
		            	    "hours":"2V",
		            	    "ECTS":3
		            	  },
		            	  {
		            	    "code":"IN2236",
		            	    "name":"Virtual Physics: Using Modern Modeling Methodologies for Computer Simulation",
		            	    "semester":"WS",
		            	    "languages":"English or German",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2071",
		            	    "name":"Knowledge-based Systems for Industrial Applications",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"3V",
		            	    "ECTS":4
		            	  }
		            	]
	},
	
	{
		"name" : "Computer Graphics and Vision",
		"courses" : [
		             {
		            	    "code":"IN2112",
		            	    "name":"2D graphical User Interfaces for Desktop-based and Mobile Computer Applications",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN3200",
		            	    "name":"Selected Topics in Computer Graphics and Vision",
		            	    "semester":"irreg.",
		            	    "languages":"English or German",
		            	    "hours":"",
		            	    "ECTS":null
		            	  },
		            	  {
		            	    "code":"IN2015",
		            	    "name":"Image Synthesis",
		            	    "semester":"WS",
		            	    "languages":"German",
		            	    "hours":"3V",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2023",
		            	    "name":"Image Understanding I: Machine Vision Algorithms",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"2V",
		            	    "ECTS":3
		            	  },
		            	  {
		            	    "code":"IN2016",
		            	    "name":"Image Understanding II: Robot Vision",
		            	    "semester":"WS",
		            	    "languages":"English or German",
		            	    "hours":"3V",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2017",
		            	    "name":"Computer Graphics",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"4V",
		            	    "ECTS":6
		            	  },
		            	  {
		            	    "code":"IN2111",
		            	    "name":"3D User Interfaces",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2018",
		            	    "name":"Augmented Reality",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2021",
		            	    "name":"Computer Aided Medical Procedures",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"4V",
		            	    "ECTS":6
		            	  },
		            	  {
		            	    "code":"IN2022",
		            	    "name":"Computer Aided Medical Procedures II",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2139",
		            	    "name":"Information Visualization",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2228",
		            	    "name":"Multiple View Geometry",
		            	    "semester":"irreg.",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2025",
		            	    "name":"Simulation and Animation",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"3V",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2240",
		            	    "name":"Statistical Methods and Learning in Computer Vision",
		            	    "semester":"WS,SS",
		            	    "languages":"English",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2210",
		            	    "name":"Tracking and Detection in Computer Vision",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2246",
		            	    "name":"Variational Methods for Computer Vision",
		            	    "semester":"WS, irreg.",
		            	    "languages":"English",
		            	    "hours":"3V+ 3†",
		            	    "ECTS":7
		            	  },
		            	  {
		            	    "code":"IN2026",
		            	    "name":"Scientific Visualization",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"3V",
		            	    "ECTS":4
		            	  }
		            	]
	},
	
	{
		"name" : "Computer Architecture",
		"courses" : [
		             {
		            	    "code":"IN2072",
		            	    "name":"Computer Systems Performance Analysis",
		            	    "semester":"irreg.",
		            	    "languages":"German",
		            	    "hours":"2V",
		            	    "ECTS":3
		            	  },
		            	  {
		            	    "code":"IN3250",
		            	    "name":"Selected Topics in Computer Architecture",
		            	    "semester":"irreg.",
		            	    "languages":"English or German",
		            	    "hours":"",
		            	    "ECTS":null
		            	  },
		            	  {
		            	    "code":"IN2073",
		            	    "name":"Cloud Computing",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"EI5037",
		            	    "name":"HW/SW Codesign",
		            	    "semester":"SS",
		            	    "languages":"English or German",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2147",
		            	    "name":"Parallel Programming",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2075",
		            	    "name":"Microprocessors",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2076",
		            	    "name":"Computer Architecture",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"4V",
		            	    "ECTS":6
		            	  },
		            	  {
		            	    "code":"IN2125",
		            	    "name":"Virtualization Techniques",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  }
		            	]
	},
	
	{
		"name" : "Distributed Systems, Networks and Security",
		"courses" : [
		             {
		            	    "code":"IN3300",
		            	    "name":"Selected Topics in Distributed Systems, Computer Networks, and Security",
		            	    "semester":"irreg.",
		            	    "languages":"English or German",
		            	    "hours":"",
		            	    "ECTS":null
		            	  },
		            	  {
		            	    "code":"IN2119",
		            	    "name":"User Modeling and Recommender Systems (Computer-supported cooperative work 2)",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"2V",
		            	    "ECTS":3
		            	  },
		            	  {
		            	    "code":"IN2092",
		            	    "name":"Computer-supported cooperative work",
		            	    "semester":"WS",
		            	    "languages":"German",
		            	    "hours":"2V",
		            	    "ECTS":3
		            	  },
		            	  {
		            	    "code":"IN2093",
		            	    "name":"eLearning - Techniques and Infrastructures",
		            	    "semester":"WS",
		            	    "languages":"English or German",
		            	    "hours":"2V",
		            	    "ECTS":3
		            	  },
		            	  {
		            	    "code":"IN2280",
		            	    "name":"Energy Informatics",
		            	    "semester":"WS, SS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2094",
		            	    "name":"Dependable and Fault Tolerant Computing",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"3V+ 2†",
		            	    "ECTS":6
		            	  },
		            	  {
		            	    "code":"IN2209",
		            	    "name":"IT Security",
		            	    "semester":"WS",
		            	    "languages":"German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2097",
		            	    "name":"Advanced computer networking",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2098",
		            	    "name":"Mobile Distributed Systems",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2101",
		            	    "name":"Network Security",
		            	    "semester":"WS",
		            	    "languages":"English or German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2099",
		            	    "name":"Network and System Management",
		            	    "semester":"irreg.",
		            	    "languages":"German",
		            	    "hours":"3V",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2161",
		            	    "name":"Networks for Monetary Transactions",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"2V",
		            	    "ECTS":3
		            	  },
		            	  {
		            	    "code":"IN2194",
		            	    "name":"Peer-to-Peer-Systems and Security",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"3V+ 2†",
		            	    "ECTS":6
		            	  },
		            	  {
		            	    "code":"IN2178",
		            	    "name":"Security Engineering",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2196",
		            	    "name":"Secure mobile systems",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2100",
		            	    "name":"Secure Computer Systems",
		            	    "semester":"WS",
		            	    "languages":"German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2102",
		            	    "name":"Distributed Applications",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2259",
		            	    "name":"Distributed Systems",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  }
		            	]
	},
	
	{
		"name" : "Formal Methods and its Applications",
		"mandatory" : true,
		"courses" : [
		             {
		            	    "code":"IN2239",
		            	    "name":"Algorithmic Game Theory",
		            	    "semester":"SS",
		            	    "languages":"English or German",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN3350",
		            	    "name":"Selected Topics in Formal Methods and their Applications",
		            	    "semester":"irreg.",
		            	    "languages":"English or German",
		            	    "hours":"",
		            	    "ECTS":null
		            	  },
		            	  {
		            	    "code":"IN2041",
		            	    "name":"Automata and Formal Languages",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2042",
		            	    "name":"Automata and Formal Languages II",
		            	    "semester":"irreg.",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2227",
		            	    "name":"Compiler construction I",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2229",
		            	    "name":"Computational Social Choice",
		            	    "semester":"irreg.",
		            	    "languages":"English",
		            	    "hours":"3V+ 2†",
		            	    "ECTS":6
		            	  },
		            	  {
		            	    "code":"IN2045",
		            	    "name":"Discrete Event Simulation",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2048",
		            	    "name":"Equational logic and lambda calculus",
		            	    "semester":"irreg.",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2049",
		            	    "name":"Logic",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2050",
		            	    "name":"Model Checking",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2165",
		            	    "name":"Model Checking II",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2052",
		            	    "name":"Petri Nets",
		            	    "semester":"irreg.",
		            	    "languages":"German",
		            	    "hours":"2V",
		            	    "ECTS":3
		            	  },
		            	  {
		            	    "code":"IN2113",
		            	    "name":"Programming Languages",
		            	    "semester":"irreg.",
		            	    "languages":"German",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2053",
		            	    "name":"Program Optimization",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2055",
		            	    "name":"Semantics",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2040",
		            	    "name":"Virtual Machines",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"3V+ 2†",
		            	    "ECTS":6
		            	  }
		            	]
	},
	
	{
		"name" : "Algorithms and Scientific Computing",
		"mandatory" : true,
		"courses" : [
		             {
		            	    "code":"IN2001",
		            	    "name":"Algorithms for Scientific Computing",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2002",
		            	    "name":"Algorithms for Scientific Computing II",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2179",
		            	    "name":"Computational Biology I",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN3400",
		            	    "name":"Selected Topics in Algorithms and Scientific Computing",
		            	    "semester":"irreg.",
		            	    "languages":"English or German",
		            	    "hours":"",
		            	    "ECTS":null
		            	  },
		            	  {
		            	    "code":"IN2127",
		            	    "name":"Selected Topics in Algorithms for Computational Biology",
		            	    "semester":"irreg.",
		            	    "languages":"German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2003",
		            	    "name":"Efficient Algorithms and Data Structures",
		            	    "semester":"WS",
		            	    "languages":"German",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2004",
		            	    "name":"Efficient Algorithms and Data Structures II",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2158",
		            	    "name":"Advanced Network and Graph Algorithms",
		            	    "semester":"WS",
		            	    "languages":"German",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2252",
		            	    "name":"High Performance Computing Ð Algorithms and Applications",
		            	    "semester":"WS",
		            	    "languages":"English or German",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2013",
		            	    "name":"High Performance Computing - Programming Paradigms and Scalability",
		            	    "semester":"SS",
		            	    "languages":"English or German",
		            	    "hours":"2V+ 1†",
		            	    "ECTS":4
		            	  },
		            	  {
		            	    "code":"IN2251",
		            	    "name":"Interdisciplinary Guided Research at the Edge of Dynamical Systems & Scientific Computing",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"1V+ 2†2S1P",
		            	    "ECTS":9
		            	  },
		            	  {
		            	    "code":"IN2007",
		            	    "name":"Complexity Theory",
		            	    "semester":"irreg.",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2197",
		            	    "name":"Cryptography",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"3V+ 1†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2010",
		            	    "name":"Modelling and Simulation",
		            	    "semester":"SS",
		            	    "languages":"German",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2115",
		            	    "name":"Network Algorithms",
		            	    "semester":"irreg.",
		            	    "languages":"English or German",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2011",
		            	    "name":"Parallel Algorithms",
		            	    "semester":"irreg.",
		            	    "languages":"German",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2012",
		            	    "name":"Parallel Numerics",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"2V+ 2†",
		            	    "ECTS":5
		            	  },
		            	  {
		            	    "code":"IN2221",
		            	    "name":"Protein Prediction",
		            	    "semester":"SS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2291",
		            	    "name":"Protein Predition II for Computer Scientists",
		            	    "semester":"WS",
		            	    "languages":"English",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  },
		            	  {
		            	    "code":"IN2160",
		            	    "name":"Randomized Algorithms",
		            	    "semester":"irreg.",
		            	    "languages":"English or German",
		            	    "hours":"4V+ 2†",
		            	    "ECTS":8
		            	  }
		            	]
	}
];

// areas data
var mandatoryAreaPicked = false;
var areasData = [
	{
		title : 'Area of Specialization',
		category : null,
		ects : 0,
		ectsMax : 18,
		courses: []
	},
	
	{
		title : 'Supplemental Area 1',
		category : null,
		ects : 0,
		ectsMax : 8,
		courses: []
	},
	
	{
		title : 'Supplemental Area 2',
		category : null,
		ects : 0,
		ectsMax : 8,
		courses: []
	},
	
	{
		title : 'Electives',
		category: 'Electives',
		ects : 0,
		ectsMax : 8,
		courses: []
	}
];

/***
 * VARIABLES ********************************
 */

// svg dimensions
var w = '100%';
var h = 1500;

// section dimensions
var categoryListWidth = 400;
var categoryNameHeight = 60;
var categoryNameYPad = 40;
var categoryNameXPad = 20;

var courseNameWidth = 350;
var courseNameHeight = 65;
var selectedCourseNameHeight = 100;
var courseNameYPad = categoryNameYPad + 60;
var courseNameXPad = categoryNameXPad;

var areasX = categoryListWidth + 50;
var areasY = 30;
var areaSeperator = 50;
var areaWidth = 500;
var areaHeight = 100;
var areaTitleTopPadding = 30;
var areaTitleLeftPadding = 30;
var areaECTSLeftPadding = 35;
var areaECTSTopPadding = 65;
var areaECTSSeperator = 25;
var areaECTSRadius = 10;

//frequently-accessed elements
var selectedArea;
var selectedCategory;

// drag behavior for courses
var drag = d3.behavior.drag()
	.on('dragstart', dragStart)
	.on('drag', dragMove)
	.on('dragend', dragEnd);

var removeDrag = d3.behavior.drag()
	.on('dragstart', null)
	.on('drag', null)
	.on('dragend', null);

/***
 * DRAWING ********************************
 */

// draw svg
var svg = d3.select('body')
	.append('svg')
	.attr('width', w)
	.attr('height', h);

//create area-list group
var areaList = svg.append('g')
	.attr('class', 'area-list')
	.attr('transform', 'translate(0, 0)');

// create area groups
var areas = areaList.selectAll('g.area')
	.data(areasData)
	.enter()
	.append('g')
	.attr('class', 'area');

// create area-groups bg
areas.append('rect')
	.attr('class', 'area-bg')
	.attr('x', areasX)
	.attr('y', function(d, i) {
		return areasY + i * (areaHeight + areaSeperator);
	})
	.attr('width', areaWidth)
	.attr('height', areaHeight)
	.attr('rx', 20)
	.attr('ry', 20);

// create area titles
areas.append('text')
	.attr('class', 'area-title')
	.text(function(d) {
		return d.title;
	})
	.attr('x', areasX + areaTitleLeftPadding)
	.attr('y', function(d, i) {
		return areasY + i * (areaHeight + areaSeperator) + areaTitleTopPadding;
	});

// create circles (ECTS place-holders for areas)
areas.each(function(d, i) {
	for(var j = 0; j < d.ectsMax; ++j) {
		d3.select(this).append('circle')
			.attr('class', 'area-circle')
			.attr('r', areaECTSRadius)
			.attr('cx', areasX + areaECTSLeftPadding + j * areaECTSSeperator)
			.attr('cy', areasY + i * (areaHeight + areaSeperator) + areaECTSTopPadding);
	}
	
	var circles = d3.select(this).selectAll('circle')[0];
	for(var j = 0; j < d.ects; ++j) {
		d3.select(circles[j]).classed('full', true);
	}
});


// create category-list group and background
var categoryList = svg.append('g')
	.attr('class', 'category-list');

categoryList.append('rect')
	.attr('class', 'category-list-bg')
	.attr('width', categoryListWidth)
	.attr('height', '100%')
	.attr('x', -15)
	.attr('rx', 20)
	.attr('ry', 20);

// create categories
var categories = categoryList.selectAll('g.category')
	.data(categoriesData)
	.enter()
	.append('g')
	.attr('class', 'category');

var categoryLabels = categories.append('g')
	.attr('class', 'category-label')
	.on('click', selectCategory);

categoryLabels.append('text')
	.attr('class', 'category-name')
	.attr('y', function(d, i) {
		return categoryNameYPad + i * categoryNameHeight;
	})
	.attr('x', categoryNameXPad)
	.text(function(d) {
		return d.name;
	});

categoryLabels.append('rect')
	.attr('class', 'category-name-bg')
	.attr('width', categoryListWidth - 15)
	.attr('height', categoryNameHeight)
	.attr('y', function(d, i) {
		return 5 + i * categoryNameHeight;
	})
	.attr('rx', 20)
	.attr('ry', 20);

// create course groups
var courseLists = categories.append('g')
	.attr('class', 'course-list');

var courses = courseLists.selectAll('g.course')
	.data(function(d) {
		return d.courses;
	})
	.enter()
	.append('g')
	.attr('class', 'course');

courses.each(function(d) {
	if(d.ECTS != null) {
		d3.select(this).call(drag);
	}
});

courses.each(function(d, i) {
	var x = courseNameXPad - categoryListWidth;
	var y = courseNameYPad + i * courseNameHeight;
	d3.select(this)
		.append('text')
		.attr('class', 'course-name')
		.text(d.ECTS ? d.name + ' (' + d.ECTS + ')' : d.name)
		.attr('x', x)
		.attr('y', y)
		.call(wrap, courseNameWidth, x, y);
	d3.select(this)
		.append('rect')
		.attr('class', 'course-name-bg')
		.attr('x', -categoryListWidth)
		.attr('y', 70 + i * courseNameHeight)
		.attr('width', categoryListWidth - 15)
		.attr('height', courseNameHeight)
		.attr('rx', 20)
		.attr('ry', 20);
});


/***
 * HELPER FUNCTIONS ********************************
 */

function wrap(text, width, x, y) {
	text.each(function() {
		var text = d3.select(this),
			words = text.text().split(/\s+/).reverse(),
			word,
			line = [],
			lineNumber = 0,
			lineHeight = 20;
			tspan = text.text(null).append('tspan').attr('x', x).attr('y', y);
		while (word = words.pop()) {
			line.push(word);
			tspan.text(line.join(' '));
			if (tspan.node().getComputedTextLength() > width) {
				line.pop();
				tspan.text(line.join(' '));
				line = [word];
				tspan = text.append('tspan').attr('x', x).attr('y', y + (++lineNumber * lineHeight)).text(word);
			}
		}
	});
}

function selectCategory(d, i) {
	selectedCategory = d3.select(this.parentNode);
	var selectedCategoryLabelObject = this;
	var ms = 750;
	
	selectedCategory.classed('selected', true);
	categories.selectAll('.category-label').filter(function() {
			return this != selectedCategoryLabelObject;
		})
		.transition()
		.duration(ms)
		.attr('transform', 'translate(-' + categoryListWidth + ', 0)');
	
	d3.select(this)
		.transition()
		.duration(ms)
	    .attr('transform', 'translate(0, -' + i * categoryNameHeight + ')');
	
	selectedCategory.select('.course-list')
		.transition()
		.duration(ms)
	    .attr('transform', 'translate(' + categoryListWidth + ', 0)')
		.each('end', function() {
			selectedCategory.select('.category-label').append('text')
			.attr('class', 'cancel-category')
			.text('X')
			.attr('x', categoryListWidth - 50)
			.attr('y', categoryNameYPad + i * categoryNameHeight);
			categoryLabels.on('click', deselectCategory);
		});
}

function deselectCategory(d, i) {
	var selectedCategoryLabelObject = this;
	svg.select('.cancel-category').remove();
	selectedCategory.classed('selected', false);
	var ms = 750;
	
	selectedCategory.select('.course-list')
		.transition()
		.duration(ms)
	    .attr('transform', 'translate(0, 0)');
	
	
	categories.selectAll('.category-label').filter(function() {
			return this != selectedCategoryLabelObject;
		})
		.transition()
		.duration(ms)
		.attr('transform', 'translate(0, 0)');
	
	d3.select(this).transition()
		.duration(ms)
	    .attr('transform', 'translate(0, 0)')
		.each('end', function() {
			categoryLabels.on('click', selectCategory);
		});
}

function dragStart(d) {
	d3.select(this).classed('dragged', true);
	var startX = d3.event.sourceEvent.pageX;
	var startY = d3.event.sourceEvent.pageY;
	var circles = d3.select(this)
		.append('g')
		.attr('class', 'course-circle-list');
	for(var j = 0; j < d.ECTS; ++j) {
		circles.append('circle')
			.attr('class', 'course-circle')
			.attr('transform', 'translate(0, 0)')
			.attr('cx', startX + j * areaECTSSeperator - categoryListWidth)
			.attr('cy', startY)
			.attr('r', areaECTSRadius - 1);
	}
}

function dragEnd() {
	
	selectedArea = areaList.select('.selected-area');
	var areaData = selectedArea.data()[0];
	var course = d3.select('.dragged');
	var categoryData = d3.select(course[0][0].parentNode).data()[0];
	var circles = course.select('.course-circle-list');
	
	// if there is a selected area and the choice is allowed
	if(selectedArea.size() > 0 && isLegalArea(areaData, categoryData)) {
		
		var ectsToAdd = course.data()[0].ECTS;
		
		course.classed('picked', true);
		course.call(removeDrag);
		
		// if course added doesn't overflow ects
		if(areaData.ects + ectsToAdd <= areaData.ectsMax) {
			
			// translate circles to empty ones
			var firstCircle = circles.select('circle');
			var firstCircleTranslate = d3.transform(circles.attr('transform')).translate;
			var effectiveStartX = parseInt(firstCircle.attr('cx')) + parseInt(firstCircleTranslate[0]) + categoryListWidth;
			var effectiveStartY = parseInt(firstCircle.attr('cy')) + parseInt(firstCircleTranslate[1]);
			
			var firstEmptyCircle = d3.select(d3.select('.selected-area').selectAll('circle')[0][areaData.ects]);
			var firstEmptyCircleTranslate = d3.transform(areaList.attr('transform')).translate;
			var effectiveEmptyStartX = parseInt(firstEmptyCircle.attr('cx')) + parseInt(firstEmptyCircleTranslate[0]);
			var effectiveEmptyStartY = parseInt(firstEmptyCircle.attr('cy')) + parseInt(firstEmptyCircleTranslate[1]);
			
			var deltaX = effectiveEmptyStartX - effectiveStartX;
			var deltaY = effectiveEmptyStartY - effectiveStartY;
			circles.selectAll('circle')
				.transition()
				.duration(750)
				.delay(function(d, i) {
					return i * 50;
				})
				.attr('transform', 'translate(' + deltaX + ', ' + deltaY + ')')
				.each('end', function(d, i) {
					// execute only once
					if(i == 0) {
						// change fill of corresponding area circles
						var counter = areaData.ects;
						selectedArea.selectAll('circle').each(function(d, i) {
							if(i == counter) {
								d3.select(this).classed('full', true);
								if(++counter >= areaData.ects + ectsToAdd) {
									counter = 100000000;
								}
							}
						});
						
						// delete course circles
						circles.remove();
						
						// adjust area data
						areaData.ects += ectsToAdd;
						if(areaData.category == null) {
							areaData.category = categoryData;
							// print category name
							selectedArea.select('text')
								.text(areaData.category.name)
								.classed('decided-area-title', true)
						}
						areaData.courses.push(course.data()[0]);
						
						if(areaData.category.mandatory) {
							mandatoryAreaPicked = true;
						}
						
					}
				});
			
		}
			
		// if course added overflows ects (need to add extra ects to electives)
		else {
			
		}
	}
	
	else {
		circles.remove();
	}
	
	course.classed('dragged', false);
	selectedArea.classed('selected-area', false);
}

function isLegalArea(areaData, categoryData) {
	// area should not already have a category
	if(areaData.category != null
		&& areaData.category.name != categoryData.name) {
		
		return false;
	}
	
	// area should not be full (ects == ectsMax)
	if(areaData.ects >= areaData.ectsMax) {
		return false;
	}
	
	// there should be no other area with the same category
	var pass = true;
	
	areas.each(function(d, i) {
		if(d.category != null
			&& d.category.name == categoryData.name
			&& d.title != areaData.title) {
			
			pass = false;
		}
	});
	
	if(!pass) {
		return false;
	}
	
	// if this is the last remaining area
	// one of the mandatory categories should be picked
	pass = true;
	
	if(!categoryData.mandatory && !mandatoryAreaPicked) {
		pass = false;
		areas.each(function(d, i) {
			if(d.category == null && d.title != areaData.title) {
				pass = true;
			}
		});
	}
	
	if(!pass) {
		return false;
	}
	
	return true;
}

function dragMove(data) {
	// drag element
	var translate = d3.transform(d3.select(this)
			.select('.course-circle-list')
			.attr('transform')).translate;
	var currentx = translate[0];
	var currenty = translate[1];
	d3.select(this).select('.course-circle-list')
		.attr('transform', 'translate (' + (d3.event.dx + currentx)
				+ ', ' + (d3.event.dy + currenty) + ')');
	
	var areasTranslate = d3.transform(areaList.attr('transform')).translate;
	var areasEffectiveX = areasX + areasTranslate[0];
	var areasEffectiveY = areasY + areasTranslate[1];
	
	// detect if mouse if over area
	var mouseX = d3.event.sourceEvent.pageX;
	var mouseY = d3.event.sourceEvent.pageY;
	areas.each(function(d, i) {
		if(mouseX + (data.ECTS - 1) * areaECTSSeperator + areaECTSRadius >= areasEffectiveX
				&& mouseX - areaECTSRadius <= areasEffectiveX + areaWidth
				&& mouseY + areaECTSRadius >= areasEffectiveY + i * (areaHeight + areaSeperator)
				&& mouseY - areaECTSRadius <= areasEffectiveY + i * (areaHeight + areaSeperator) + areaHeight) {
			selectedArea = d3.select(this);
			selectedArea.classed('selected-area', true);
		}
		
		else {
			d3.select(this).classed('selected-area', false);
		}
	});
}

// detect and handle window scrolling
window.onscroll = scrollHandler;
function scrollHandler(e) {
	areaList.transition()
		.duration(500)
		.attr('transform', 'translate (0, ' + window.pageYOffset + ')');
}
